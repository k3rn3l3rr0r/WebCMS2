{**
 * Administration main layout WebCMS2.
 *
 * @copyright  Copyright (c) 2013 Tomáš Voslař
 * @package    WebCMS
 *
 * @param string   $basePath web base path
 * @param string   $robots   tell robots how to index the content of a page (optional)
 * @param array    $flashes  flash messages
 *}
<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">

	<meta name="description" content="WebCMS2 Administration">
	<meta name="robots" content="{$robots}" n:ifset="$robots">

	<title>WebCMS - {_'Administration'}</title>
	{block head}
		{* TODO vytvorit hlavni soubory pro js a css, include pouze techto dvou *}
		<link rel="stylesheet" media="screen,projection,tv" href="{$basePath}/../libs/webcms2/webcms2/AdminModule/client-side/css/screen.css" type="text/css">
		<link rel="stylesheet" media="print" href="{$basePath}/../libs/webcms2/webcms2/AdminModule/client-side/css/print.css" type="text/css">
		<link rel="stylesheet" media="screen" href="{$basePath}/../libs/webcms2/webcms2/AdminModule/client-side/grido/grido.css" type="text/css">
		<link rel="stylesheet" media="screen" href="{$basePath}/../libs/webcms2/webcms2/AdminModule/client-side/kendoui/kendo.common.css" type="text/css">
		<link rel="stylesheet" media="screen" href="{$basePath}/../libs/webcms2/webcms2/AdminModule/client-side/kendoui/kendo.default.css" type="text/css">
		<link rel="stylesheet" media="screen" href="{$basePath}/../libs/webcms2/webcms2/AdminModule/client-side/bootstrap/css/bootstrap.css" type="text/css">
		<link rel="shortcut icon" href="{$basePath}/favicon.ico" type="image/x-icon">
		<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js"></script>
	{/block}
</head>

<body>
	<script> 
		var basePath = {$basePath};
		document.body.className+=' js' 
	</script>
	
	<div class="navbar navbar-inverse navbar-fixed-top">
      <div class="container system-menu jq_head">
		<div class="navbar-header">
		  <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
		  <a class="navbar-brand ajax" n:href=":Admin:Homepage:">WebCMS</a>
		</div>

		<div class="navbar-collapse collapse">
			{snippet header}
				<ul class="nav navbar-nav">
					{if $template->checkPermissions($user, 'admin:Pages')}  
						<li {if $activePresenter == "Admin:Pages"}class="active"{/if}>
							<a class="ajax" n:href=":Admin:Pages:">{_'Pages'}</a>
						</li>
					{/if}
					{if $template->checkPermissions($user, 'admin:Users')}
					  <li {if $activePresenter == "Admin:Users"}class="active"{/if}>
						  <a class="ajax" n:href=":Admin:Users:">{_'Users'}</a>
					  </li>
					{/if}
					{if $template->checkPermissions($user, 'admin:Languages')}
					  <li {if $activePresenter == "Admin:Languages"}class="active"{/if}>
						  <a class="ajax" n:href=":Admin:Languages:">{_'Languages and translations'}</a>
					  </li>
					{/if}
					{if $template->checkPermissions($user, 'admin:Settings')}
					  <li {if $activePresenter == "Admin:Settings"}class="active"{/if}>
						  <a class="ajax" n:href=":Admin:Settings:">{_'Settings'}</a>
					  </li>
					{/if}
					{if $template->checkPermissions($user, 'admin:Filesystem')}
					  <li {if $activePresenter == "Admin:Filesystem"}class="active"{/if}>
						  <a class="ajax" n:href=":Admin:Filesystem:">{_'Filesystem'}</a>
					  </li>
					{/if}
					{if $template->checkPermissions($user, 'admin:Update')}
					  <li {if $activePresenter == "Admin:Update"}class="active"{/if}>
						  <a class="ajax" n:href=":Admin:Update:">{_'Update'} <span class="badge">0</span></a>
					  </li>
					{/if}
				  </ul>
			
			<div class="navbar-form navbar-right">
				
				<div class="btn-group">
					<button type="button" class="btn btn-primary btn-xs dropdown-toggle" data-toggle="dropdown">
						{_'Options'} <span class="caret"></span>
					</button>
					<br />
					<form method="get" class="pull-left">
						<select id="languageChanger" name='language_id_change' class="btn btn-xs">
							{foreach $languages as $l}
								<option value="{$l->getId()}" {if $l->getId() == $language->getId()}selected{/if}>{$l->getName()}</option>
							{/foreach}
						</select>
					</form>
				  <ul class="dropdown-menu" role="menu">
					<li><a n:href=":Admin:users:updateUser id =>  $user->getIdentity()->id" class="ajax" data-remote="false" data-target="#myModal" data-toggle="modal">{_'Account settings'}</a></li>
					<li>
						<a n:href=":Frontend:Homepage:" onclick="$(this).attr('target', '_blank');">{_'Go to frontend'}</a>  
					</li>
					<li class="divider"></li>
					<li>
						<a n:href=":Admin:Login:out" class="logout" data-confirm="{_'Are you sure?'}">{_'Sign out'}</a>  
					</li>
				  </ul>
				</div>
					
			</div>
			{/snippet}
		</div>
	</div>
	</div>
			
	<div id="loader">
		 <div class="progress progress-striped active" style="width: 300px;">
			<div class="progress-bar"  role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width: 100%">
			  <div>{_'Loading data...'}</div>
			</div>
		  </div>
	</div>
	 
	<div class="container content">
		
		<div class="container flash-messages">
			{snippet flashMessages}
				<div n:foreach="$flashes as $flash" class="alert alert-{$flash->type} fade in">{$flash->message}<a href="#" class="close" data-dismiss="alert">&times;</a></div>
			{/snippet}
		</div>
		
		{snippet content}
			{block #content}Výchozí obsah{/block}
			<script>
				eval({$dynamicJs});
			</script>
		{/snippet}
		
	</div>
	
	<div class="sidebar sidebar-offcanvas" id="sidebar" role="navigation">
          <div class="well sidebar-nav">
            {include 'system/structures.latte'}
          </div><!--/.well -->
        </div>
	
	{snippet footer}
	<footer class="navbar navbar-default footer">
		<p class="navbar-text pull-right">WebCMS {_'version'} {$version['version']} {if !empty($version['versionHash'])}{_'revision:'} {$version['versionHash']}{/if}. &copy; Webcook 2009-2013</p>
	</footer>
	{/snippet}
	
	<!-- Modal -->
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog">
	<div class="modal-content">
	  <div class="modal-header">
		<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
	  </div>
	  <div class="modal-body">
		 {define modalContent}{/define}
		  
		{snippet modalContent}
				{include #modalContent}
		{/snippet}
	  </div>
	</div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->
	
		<script type="text/javascript" src="{$basePath}/../libs/webcms2/webcms2/AdminModule/client-side/kendoui/kendo.web.js"></script>
		<script type="text/javascript" src="{$basePath}/../libs/webcms2/webcms2/AdminModule/client-side/ckeditor/ckeditor.js"></script>
		<script src="{$basePath}/../libs/webcms2/webcms2/AdminModule/client-side/ckeditor/adapters/jquery.js"></script>
		<script type="text/javascript" src="{$basePath}/../libs/webcms2/webcms2/AdminModule/client-side/bootstrap/js/bootstrap.js"></script>
		<script type="text/javascript" src="{$basePath}/../libs/webcms2/webcms2/AdminModule/client-side/plugins/bootbox.min.js"></script>
		<script type="text/javascript" src="{$basePath}/../libs/webcms2/webcms2/AdminModule/client-side/grido/grido.js"></script>
		<script type="text/javascript" src="{$basePath}/../libs/webcms2/webcms2/AdminModule/client-side/plugins/nette.ajax.js"></script>
		<script type="text/javascript" src="{$basePath}/../libs/webcms2/webcms2/AdminModule/client-side/js/netteForms.js"></script>
		<script type="text/javascript" src="{$basePath}/../libs/webcms2/webcms2/AdminModule/client-side/js/Webcms/Webcms.js"></script>
</body>
</html>
